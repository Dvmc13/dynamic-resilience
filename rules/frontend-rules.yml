rules:
  - condition: "response.status == 500"
    action: |
      if (retryCount < ${retry.maxAttempts:3}) {
        retryCount++;
        retry(delay = ${retry.waitDuration:500ms});
      } else {
        throw new ServiceUnavailableException("Falló después de ${retry.maxAttempts:3} reintentos");
      }
